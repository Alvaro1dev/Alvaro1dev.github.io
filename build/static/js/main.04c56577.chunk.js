(this["webpackJsonpreact-three-fiber-challenge"]=this["webpackJsonpreact-three-fiber-challenge"]||[]).push([[0],{34:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),c=n(28),u=n.n(c),i=(n(34),n(10)),s=n.n(i),o=n(13),f=n(9),l=n(26),d=n(8),h=n(42),b=n(11),j=new AudioContext,p=j.createAnalyser(),v=new Uint8Array(p.frequencyBinCount);navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){j.createMediaStreamSource(e).connect(p)}));var m={iTime:{value:0},iResolution:{value:new d.Vector3},iChannel0:{value:new d.DataTexture(v,p.fftSize/8,1,d.LuminanceFormat)},iChannel1:{value:new d.DataTexture(v,p.fftSize/8,1,d.LuminanceFormat)},iChannel2:{value:new d.DataTexture(v,p.fftSize/8,1,d.LuminanceFormat)},iChannel3:{value:new d.DataTexture(v,p.fftSize/8,1,d.LuminanceFormat)}},x=Object(r.forwardRef)((function(e,t){var n=e.shader,a=function(){var e=document.getElementById("fiberCanvas");m.iResolution.value.set(e.offsetWidth,e.offsetHeight,1)};return Object(r.useEffect)((function(){a(),window.addEventListener("resize",(function(){return a()}))}),[]),Object(l.b)((function(){p.getByteFrequencyData(v),t.current.material.uniforms.iTime.value+=.015,t.current.material.uniforms.iChannel0.value.needsUpdate=!0})),Object(b.jsx)(h.a,{ref:t,args:[15,15],children:Object(b.jsx)("shaderMaterial",{args:[{uniforms:m,fragmentShader:n}]})})})),O=(n(39),function(){var e=Object(r.useRef)(11),t=Object(r.useRef)(null),n=Object(r.useState)(),a=Object(f.a)(n,2),c=a[0],u=a[1],i=function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./".concat(t,".json"),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.shader);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var t=Object(o.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=e.current+parseInt(n.target.value))<1||r>16)){t.next=3;break}return t.abrupt("return");case 3:return e.current=r,t.t0=u,t.next=7,i(r);case 7:t.t1=t.sent,(0,t.t0)(t.t1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(e){return new Promise((function(t){return setTimeout(t,e)}))},j=function(){var n=Object(o.a)(s.a.mark((function n(){var r,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!==e.current){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,i(e.current-1);case 4:r=n.sent,a=0;case 6:if(!(a<100)){n.next=18;break}return t.current.material.fragmentShader=r,t.current.material.needsUpdate=!0,n.next=11,h(6);case 11:return t.current.material.fragmentShader=c,t.current.material.needsUpdate=!0,n.next=15,h(6);case 15:a++,n.next=6;break;case 18:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),p=function(){var t=Object(o.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e.current);case 2:n=t.sent,u(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){p()}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{id:"next",children:[Object(b.jsx)("button",{onClick:d,value:1,children:"Next"}),Object(b.jsx)("button",{onClick:j,value:1,children:"rapid"})]}),Object(b.jsx)("div",{id:"prev",children:Object(b.jsx)("button",{onClick:d,value:-1,children:"Previous"})}),Object(b.jsx)(l.a,{id:"fiberCanvas",children:c&&Object(b.jsx)(x,{ref:t,shader:c})})]})}),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),c(e),u(e)}))};u.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root")),w()}},[[40,1,2]]]);
//# sourceMappingURL=main.04c56577.chunk.js.map